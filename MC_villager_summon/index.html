<!doctype html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Minecraft Server Resource Pack</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link href="css/main.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
</head>

<!-- Navbar-->
<nav class="navbar bg-light fixed-top" data-bs-theme="light">
    <div class="container-fluid">
        <a class="navbar-brand" href="index.html">Minecraft 1.21 æ‘æ°‘å•†åº—æŒ‡ä»¤</a>
    </div>
</nav>


<body>
    <!-- TOP Button -->
    <div class="fixed-bottom">
        <div class="row">
            <div class="col-sm-11"></div>
            <div class="col-sm-1 top">
                <a href="#top">
                    <button class="btn btn-info" style="width: 50px;height: 50px;">ğŸ”¼</button>
                </a>
            </div>
        </div>
    </div>

    <!-- å†…å®¹å€å¡Š -->
    <div class="container-contact">
        <div class="row row-block">
            <!-- å¤§å€åŸŸ -->
            <div class="col-12">
                <!-- å°å€å¡Š -->
                <div class="card-block" id="Draw">
                    <div class="main_card">
                        <h5 class="main_card_title">Minecraft 1.21 æ‘æ°‘å•†åº—æŒ‡ä»¤</h5>
                        <form class="row gy-2 gx-3 align-items-center">
                            <div class="col-6">
                                <label class="form-label">æ‘æ°‘è·æ¥­</label>
                                <select class="form-select" id="shop_profession" required>
                                    <option value="" selected>é¸æ“‡æ‘æ°‘è·æ¥­</option>
                                    <option value="minecraft:armorer">è£½ç”²å¸«</option>
                                    <option value="minecraft:butcher">å± å¤«</option>
                                    <option value="minecraft:cartographer">è£½åœ–åŒ </option>
                                    <option value="minecraft:cleric">ç‰§å¸«</option>
                                    <option value="minecraft:farmer">è¾²å¤«</option>
                                    <option value="minecraft:fisherman">æ¼å¤«</option>
                                    <option value="minecraft:fletcher">è£½ç®­å¸«</option>
                                    <option value="minecraft:leatherworker">è£½çš®åŒ </option>
                                    <option value="minecraft:librarian">åœ–æ›¸ç®¡ç†å“¡</option>
                                    <option value="minecraft:mason">çŸ³åŒ </option>
                                    <option value="minecraft:shepherd">ç‰§ç¾Šäºº</option>
                                    <option value="minecraft:toolsmith">å·¥åŒ </option>
                                    <option value="minecraft:weaponsmith">æ­¦å™¨åŒ </option>
                                </select>
                            </div>
                            <div class="col-6">
                                <label class="form-label">æ‘æ°‘ç¸½é¡</label>
                                <select class="form-select" id="shop_type" required>
                                    <option value="" selected>é¸æ“‡æ‘æ°‘ç¸½é¡</option>
                                    <option value="minecraft:desert">æ²™æ¼ </option>
                                    <option value="minecraft:jungle">å¢æ—</option>
                                    <option value="minecraft:plains">å¹³åŸ</option>
                                    <option value="minecraft:savanna">è½åŸ</option>
                                    <option value="minecraft:snow">é›ªåœ°</option>
                                    <option value="minecraft:swamp">æ²¼æ¾¤</option>
                                    <option value="minecraft:taiga">é‡è‘‰æ—</option>
                                </select>
                            </div>

                            <div id="Recipes"></div>

                            <div class="col-12">
                                <button type="button" class="btn btn-primary" onclick="addRecipe()">æ–°å¢å•†å“</button>
                            </div>

                            <div class="col-12">
                                <button type="button" class="btn btn-primary" onclick="mySubmit()">é€å‡º</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- å€å¡Šå°¾ -->
            </div>
        </div>
    </div>
</body>
<script>
    const Recipe = "<div class=\"Recipe\"\><label class=\"form-label\" style=\"font-weight: bold; font-size: 20px;\"></label> <div class=\"col-6\"><label class=\"form-label\">å•†å“</label><label class=\"visually-hidden\">Name</label><input type=\"text\" class=\"form-control\" placeholder=\"å•†å“ (id, ä¾‹å¦‚:minecraft:stone)\"><input type=\"number\" class=\"form-control\" placeholder = \"æ•¸é‡\" /></div><div class=\"col-6\"></div><div class=\"col-12\"><label class=\"form-label\">å”®å‡º</label><label class=\"visually-hidden\" >Name</label><input type=\"text\" class=\"form-control\" placeholder=\"å”®å‡ºå•†å“ (id, ä¾‹å¦‚:minecraft:stone)\"><input type=\"number\" class=\"form-control\" placeholder = \"æ•¸é‡\" /><button type = \"button\" onclick = \"deleteRecipe(this)\" class=\"btn btn-danger\">åˆªé™¤</button></div>";

    function addRecipe() {
        var recipediv = document.createElement("div");
        recipediv.className = "Recipe";

        var col_6_div1 = document.createElement("div");
        col_6_div1.className = "col-6";

        var col_6_div2 = document.createElement("div");
        col_6_div2.className = "col-6";

        var col_12_div = document.createElement("div");
        col_12_div.className = "col-12";

        var label = document.createElement("label");
        label.className = "form-label";
        label.innerHTML = "å•†å“"
        label.style = "font-weight: bold; font-size: 20px;";

        recipediv.appendChild(label);

        label = document.createElement("label");
        label.className = "form-label";
        label.innerHTML = "å•†å“";

        col_6_div1.appendChild(label);

        var input = document.createElement("input");
        input.type = "text";
        input.className = "form-control";
        input.placeholder = "å•†å“ (id, ä¾‹å¦‚:minecraft:stone)";

        col_6_div1.appendChild(input);

        input = document.createElement("input");
        input.type = "number";
        input.className = "form-control";
        input.placeholder = "æ•¸é‡";

        col_6_div1.appendChild(input);

        //

        label = document.createElement("label");
        label.className = "form-label";
        label.innerHTML = "å•†å“B (éå¿…è¦)";

        col_6_div2.appendChild(label);

        var input = document.createElement("input");
        input.type = "text";
        input.className = "form-control";
        input.placeholder = "å•†å“B (id, ä¾‹å¦‚:minecraft:stone)";

        col_6_div2.appendChild(input);

        input = document.createElement("input");
        input.type = "number";
        input.className = "form-control";
        input.placeholder = "æ•¸é‡";

        col_6_div2.appendChild(input);

        //

        label = document.createElement("label");
        label.className = "form-label";
        label.innerHTML = "å”®å‡º";

        col_12_div.appendChild(label);

        input = document.createElement("input");
        input.type = "text";
        input.className = "form-control";
        input.placeholder = "å”®å‡ºå•†å“ (id, ä¾‹å¦‚:minecraft:stone)";

        col_12_div.appendChild(input);

        input = document.createElement("input");
        input.type = "number";
        input.className = "form-control";
        input.placeholder = "æ•¸é‡";

        col_12_div.appendChild(input);

        var button = document.createElement("button");
        button.type = "button";
        button.onclick = function () { deleteRecipe(this); };
        button.className = "btn btn-danger";
        button.innerHTML = "åˆªé™¤";

        recipediv.appendChild(col_6_div1);
        recipediv.appendChild(col_6_div2);
        recipediv.appendChild(col_12_div);
        recipediv.appendChild(button);

        document.querySelector("#Recipes").appendChild(recipediv);

        var recipeIndex = 1;
        document.querySelectorAll(".Recipe").forEach((value) => {
            value.id = "Recipe" + recipeIndex;
            value.querySelectorAll("label")[0].innerHTML = "å•†å“" + recipeIndex;
            recipeIndex += 1;
        });
    }

    function mySubmit() {

        var finalCommand = "";

        villagerType = document.querySelector("#shop_type").value;
        villagerProfession = document.querySelector("#shop_profession").value;


        finalCommand = 'summon minecraft:villager ~ ~1 ~ \{VillagerData: \{ type: \"' + villagerType + '\", profession: \"' + villagerProfession + '\",level: 99}, Invulnerable: 1, NoAI: 1, Offers: { Recipes: [';

        var recipes = document.querySelectorAll(".Recipe");

        recipes.forEach((value) => {
            //get input value
            var myInputValue = [];
            value.querySelectorAll("input").forEach((x) => {
                myInputValue.push(x.value);
            });

            if (myInputValue[0] == "" || myInputValue[1] == "" || myInputValue[4] == "" || myInputValue[5] == "") {
                return;
            }

            //run
            finalCommand += "{maxUses: 100000000,rewardExp: false,buy: {count: ";
            if (myInputValue[2] == "" || myInputValue[3] == "") {
                finalCommand += myInputValue[1];
                finalCommand += ",id: \"";
                finalCommand += myInputValue[0];
                finalCommand += "\"},sell: {count: ";
                finalCommand += myInputValue[5];
                finalCommand += ",id: \"";
                finalCommand += myInputValue[4];
            } else {
                finalCommand += myInputValue[1];
                finalCommand += ",id: \"";
                finalCommand += myInputValue[0];
                finalCommand += "\"},buyB: {count: ";
                finalCommand += myInputValue[3];
                finalCommand += ",id: \"";
                finalCommand += myInputValue[2];
                finalCommand += "\"},sell: {count: ";
                finalCommand += myInputValue[5];
                finalCommand += ",id: \"";
                finalCommand += myInputValue[4];
            }
            finalCommand += "\"}},";
        });
        finalCommand += "]}}";
        alert(finalCommand);
    }

    function deleteRecipe(value) {
        value.parentElement.remove();
        var recipeIndex = 1;
        document.querySelectorAll(".Recipe").forEach((value) => {
            value.id = "Recipe" + recipeIndex;
            value.querySelectorAll("label")[0].innerHTML = "å•†å“" + recipeIndex;
            value.querySelectorAll("label")[0].style = "font-weight: bold; font-size: 20px;";
            recipeIndex += 1;
        });
    }

</script>

</html>